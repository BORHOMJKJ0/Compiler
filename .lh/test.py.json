{
    "sourceFile": "test.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1769039992159,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1769039999587,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,9 @@\n print(\"=\" * 70)\n \n issues = [\n     \"1. Arithmetic expressions - Only left operand showing\",\n-    \"2. Parenthesized expressions - Only first value showing\", \n+    \"2. Parenthesized expressions - Only first value showing\",\n     \"3. INSERT VALUES - Multiple value sets not captured\",\n     \"4. UPDATE SET - Expression missing\",\n     \"5. DELETE WHERE - Condition missing\",\n     \"6. WHERE IN - List values missing\",\n@@ -125,5 +125,5 @@\n print(\"4. Fix DELETE to capture WHERE conditions\")\n print(\"5. Add JOIN clause handling\")\n print(\"6. Add CASE expression support\")\n print(\"7. Add BETWEEN operator support\")\n-print(\"8. Add IN operator support with expression lists\")\n\\ No newline at end of file\n+print(\"8. Add IN operator support with expression lists\")\n"
                },
                {
                    "date": 1769043592321,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,129 +1,22 @@\n-\"\"\"\n-SQL Parser Test Diagnostic\n-Run this to check which features are working\n-\"\"\"\n+from antlr4 import FileStream, CommonTokenStream\n+from SQLParser import SQLParser\n+from ast_builder import AstBuilder\n \n-import json\n+# Read SQL file\n+input_stream = FileStream('testing.sql', encoding='utf-8')\n \n-# Test cases with expected behaviors\n-test_cases = [\n-    {\n-        \"name\": \"Simple SELECT\",\n-        \"sql\": \"SELECT 1;\",\n-        \"check\": \"Should have literal 1 in select list\"\n-    },\n-    {\n-        \"name\": \"Arithmetic Expression\",\n-        \"sql\": \"SELECT 5 + 3 * 2;\",\n-        \"check\": \"Should show BinaryExpression with + and nested * operation\"\n-    },\n-    {\n-        \"name\": \"Parenthesized Expression\",\n-        \"sql\": \"SELECT (5 + 3) * 2;\",\n-        \"check\": \"Should show ParenthesizedExpression with both numbers\"\n-    },\n-    {\n-        \"name\": \"WHERE with IN\",\n-        \"sql\": \"SELECT * FROM users WHERE id IN (1,2,3);\",\n-        \"check\": \"Should show InCondition with list [1,2,3]\"\n-    },\n-    {\n-        \"name\": \"INSERT with VALUES\",\n-        \"sql\": \"INSERT INTO users (id, name) VALUES (1, 'Ali'), (2, 'Sara');\",\n-        \"check\": \"Should show insertValues with multiple rows\"\n-    },\n-    {\n-        \"name\": \"UPDATE with SET\",\n-        \"sql\": \"UPDATE users SET name = 'Updated' WHERE id = 1;\",\n-        \"check\": \"Should show assignment with expression 'Updated'\"\n-    },\n-    {\n-        \"name\": \"DELETE with WHERE\",\n-        \"sql\": \"DELETE FROM users WHERE id = 2;\",\n-        \"check\": \"Should show whereClause with condition\"\n-    },\n-    {\n-        \"name\": \"CASE Expression\",\n-        \"sql\": \"SELECT CASE WHEN x = 1 THEN 'yes' ELSE 'no' END FROM t;\",\n-        \"check\": \"Should show CaseExpression with whenClause and elseClause\"\n-    },\n-    {\n-        \"name\": \"BETWEEN\",\n-        \"sql\": \"SELECT * FROM orders WHERE price BETWEEN 10 AND 100;\",\n-        \"check\": \"Should show BinaryCondition or special BETWEEN node\"\n-    },\n-    {\n-        \"name\": \"EXISTS with subquery\",\n-        \"sql\": \"SELECT * FROM users WHERE EXISTS (SELECT 1 FROM orders WHERE orders.user_id = users.id);\",\n-        \"check\": \"Should show EXISTS with nested SELECT statement\"\n-    },\n-    {\n-        \"name\": \"INNER JOIN\",\n-        \"sql\": \"SELECT * FROM users INNER JOIN orders ON users.id = orders.user_id;\",\n-        \"check\": \"Should show fromClause with multiple tableSources or joinClause\"\n-    },\n-    {\n-        \"name\": \"LEFT JOIN\",\n-        \"sql\": \"SELECT * FROM users LEFT JOIN orders ON users.id = orders.user_id;\",\n-        \"check\": \"Should show JOIN with type indicator\"\n-    },\n-    {\n-        \"name\": \"Bitwise operators\",\n-        \"sql\": \"SELECT 1 & 0, 1 | 0, 1 ^ 1;\",\n-        \"check\": \"Should show BinaryExpression with &, |, ^ operators\"\n-    },\n-    {\n-        \"name\": \"Variable assignment\",\n-        \"sql\": \"DECLARE @x INT = 5;\",\n-        \"check\": \"Should show declareStatement with expression\"\n-    },\n-    {\n-        \"name\": \"SET with expression\",\n-        \"sql\": \"SET @y = @x * 2.5;\",\n-        \"check\": \"Should show setStatement with BinaryExpression\"\n-    }\n-]\n+# Tokenize\n+lexer = BaseLexer(input_stream.strdata)\n+tokens = CommonTokenStream(lexer.lexer)\n \n-print(\"=\" * 70)\n-print(\"SQL PARSER DIAGNOSTIC TESTS\")\n-print(\"=\" * 70)\n-print(\"\\nTest each of these queries in your parser and check the output:\\n\")\n+# Parse\n+parser = SQLParser(tokens)\n+tree = parser.parse()\n \n-for i, test in enumerate(test_cases, 1):\n-    print(f\"{i}. {test['name']}\")\n-    print(f\"   SQL: {test['sql']}\")\n-    print(f\"   Expected: {test['check']}\")\n-    print()\n+# Build AST\n+builder = AstBuilder()\n+ast = builder.visit(tree)\n \n-print(\"=\" * 70)\n-print(\"\\nKNOWN ISSUES TO FIX:\")\n-print(\"=\" * 70)\n-\n-issues = [\n-    \"1. Arithmetic expressions - Only left operand showing\",\n-    \"2. Parenthesized expressions - Only first value showing\",\n-    \"3. INSERT VALUES - Multiple value sets not captured\",\n-    \"4. UPDATE SET - Expression missing\",\n-    \"5. DELETE WHERE - Condition missing\",\n-    \"6. WHERE IN - List values missing\",\n-    \"7. JOINs - Not parsing join clauses\",\n-    \"8. CASE - Not building properly\",\n-    \"9. BETWEEN - Not handled\",\n-    \"10. Bitwise operators - Not recognized\",\n-    \"11. Variable expressions in SET - Not building\",\n-]\n-\n-for issue in issues:\n-    print(f\"❌ {issue}\")\n-\n-print(\"\\n\" + \"=\" * 70)\n-print(\"SUGGESTED FIX PRIORITY:\")\n-print(\"=\" * 70)\n-print(\"1. Fix expression builder to handle binary operators properly\")\n-print(\"2. Fix INSERT to capture all VALUES rows\")\n-print(\"3. Fix UPDATE to capture SET expressions\")\n-print(\"4. Fix DELETE to capture WHERE conditions\")\n-print(\"5. Add JOIN clause handling\")\n-print(\"6. Add CASE expression support\")\n-print(\"7. Add BETWEEN operator support\")\n-print(\"8. Add IN operator support with expression lists\")\n+# Print results\n+for node in ast:\n+    print(type(node).__name__)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1769043598041,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,20 @@\n+from antlr4 import FileStream, CommonTokenStream\n+from SQLParser import SQLParser\n+from ast_builder import AstBuilder\n+\n+# Read SQL file\n+input_stream = FileStream('testing.sql', encoding='utf-8')\n+\n+# Tokenize\n+lexer = BaseLexer(input_stream.strdata)\n+tokens = CommonTokenStream(lexer.lexer)\n+\n+# Parse\n+parser = SQLParser(tokens)\n+tree = parser.parse()\n+\n+builder = AstBuilder()\n+ast = builder.visit(tree)\n+\n+for node in ast:\n+    print(type(node).__name__)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1769043604547,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,39 +4,15 @@\n \n # Read SQL file\n input_stream = FileStream('testing.sql', encoding='utf-8')\n \n-# Tokenize\n lexer = BaseLexer(input_stream.strdata)\n tokens = CommonTokenStream(lexer.lexer)\n \n-# Parse\n parser = SQLParser(tokens)\n tree = parser.parse()\n \n builder = AstBuilder()\n ast = builder.visit(tree)\n \n for node in ast:\n-    print(type(node).__name__)\n-from antlr4 import FileStream, CommonTokenStream\n-from SQLParser import SQLParser\n-from ast_builder import AstBuilder\n-\n-# Read SQL file\n-input_stream = FileStream('testing.sql', encoding='utf-8')\n-\n-# Tokenize\n-lexer = BaseLexer(input_stream.strdata)\n-tokens = CommonTokenStream(lexer.lexer)\n-\n-# Parse\n-parser = SQLParser(tokens)\n-tree = parser.parse()\n-\n-# Build AST\n-builder = AstBuilder()\n-ast = builder.visit(tree)\n-\n-# Print results\n-for node in ast:\n     print(type(node).__name__)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1769043613519,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,8 @@\n from antlr4 import FileStream, CommonTokenStream\n from SQLParser import SQLParser\n-from ast_builder import AstBuilder\n+from Ast.ast_builder import AstBuilder\n \n-# Read SQL file\n input_stream = FileStream('testing.sql', encoding='utf-8')\n \n lexer = BaseLexer(input_stream.strdata)\n tokens = CommonTokenStream(lexer.lexer)\n"
                },
                {
                    "date": 1769043619171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n from antlr4 import FileStream, CommonTokenStream\n from SQLParser import SQLParser\n-from .ast_builder import AstBuilder\n+from bui.ast_builder import AstBuilder\n \n input_stream = FileStream('testing.sql', encoding='utf-8')\n \n lexer = BaseLexer(input_stream.strdata)\n"
                },
                {
                    "date": 1769043647426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n from antlr4 import FileStream, CommonTokenStream\n from SQLParser import SQLParser\n-from BaParser import BaseLexer\n+from BasrParser import BaseLexer\n from builders.ast_builder import AstBuilder\n \n input_stream = FileStream('testing.sql', encoding='utf-8')\n \n"
                }
            ],
            "date": 1769039992159,
            "name": "Commit-0",
            "content": "\"\"\"\nSQL Parser Test Diagnostic\nRun this to check which features are working\n\"\"\"\n\nimport json\n\n# Test cases with expected behaviors\ntest_cases = [\n    {\n        \"name\": \"Simple SELECT\",\n        \"sql\": \"SELECT 1;\",\n        \"check\": \"Should have literal 1 in select list\"\n    },\n    {\n        \"name\": \"Arithmetic Expression\",\n        \"sql\": \"SELECT 5 + 3 * 2;\",\n        \"check\": \"Should show BinaryExpression with + and nested * operation\"\n    },\n    {\n        \"name\": \"Parenthesized Expression\",\n        \"sql\": \"SELECT (5 + 3) * 2;\",\n        \"check\": \"Should show ParenthesizedExpression with both numbers\"\n    },\n    {\n        \"name\": \"WHERE with IN\",\n        \"sql\": \"SELECT * FROM users WHERE id IN (1,2,3);\",\n        \"check\": \"Should show InCondition with list [1,2,3]\"\n    },\n    {\n        \"name\": \"INSERT with VALUES\",\n        \"sql\": \"INSERT INTO users (id, name) VALUES (1, 'Ali'), (2, 'Sara');\",\n        \"check\": \"Should show insertValues with multiple rows\"\n    },\n    {\n        \"name\": \"UPDATE with SET\",\n        \"sql\": \"UPDATE users SET name = 'Updated' WHERE id = 1;\",\n        \"check\": \"Should show assignment with expression 'Updated'\"\n    },\n    {\n        \"name\": \"DELETE with WHERE\",\n        \"sql\": \"DELETE FROM users WHERE id = 2;\",\n        \"check\": \"Should show whereClause with condition\"\n    },\n    {\n        \"name\": \"CASE Expression\",\n        \"sql\": \"SELECT CASE WHEN x = 1 THEN 'yes' ELSE 'no' END FROM t;\",\n        \"check\": \"Should show CaseExpression with whenClause and elseClause\"\n    },\n    {\n        \"name\": \"BETWEEN\",\n        \"sql\": \"SELECT * FROM orders WHERE price BETWEEN 10 AND 100;\",\n        \"check\": \"Should show BinaryCondition or special BETWEEN node\"\n    },\n    {\n        \"name\": \"EXISTS with subquery\",\n        \"sql\": \"SELECT * FROM users WHERE EXISTS (SELECT 1 FROM orders WHERE orders.user_id = users.id);\",\n        \"check\": \"Should show EXISTS with nested SELECT statement\"\n    },\n    {\n        \"name\": \"INNER JOIN\",\n        \"sql\": \"SELECT * FROM users INNER JOIN orders ON users.id = orders.user_id;\",\n        \"check\": \"Should show fromClause with multiple tableSources or joinClause\"\n    },\n    {\n        \"name\": \"LEFT JOIN\",\n        \"sql\": \"SELECT * FROM users LEFT JOIN orders ON users.id = orders.user_id;\",\n        \"check\": \"Should show JOIN with type indicator\"\n    },\n    {\n        \"name\": \"Bitwise operators\",\n        \"sql\": \"SELECT 1 & 0, 1 | 0, 1 ^ 1;\",\n        \"check\": \"Should show BinaryExpression with &, |, ^ operators\"\n    },\n    {\n        \"name\": \"Variable assignment\",\n        \"sql\": \"DECLARE @x INT = 5;\",\n        \"check\": \"Should show declareStatement with expression\"\n    },\n    {\n        \"name\": \"SET with expression\",\n        \"sql\": \"SET @y = @x * 2.5;\",\n        \"check\": \"Should show setStatement with BinaryExpression\"\n    }\n]\n\nprint(\"=\" * 70)\nprint(\"SQL PARSER DIAGNOSTIC TESTS\")\nprint(\"=\" * 70)\nprint(\"\\nTest each of these queries in your parser and check the output:\\n\")\n\nfor i, test in enumerate(test_cases, 1):\n    print(f\"{i}. {test['name']}\")\n    print(f\"   SQL: {test['sql']}\")\n    print(f\"   Expected: {test['check']}\")\n    print()\n\nprint(\"=\" * 70)\nprint(\"\\nKNOWN ISSUES TO FIX:\")\nprint(\"=\" * 70)\n\nissues = [\n    \"1. Arithmetic expressions - Only left operand showing\",\n    \"2. Parenthesized expressions - Only first value showing\", \n    \"3. INSERT VALUES - Multiple value sets not captured\",\n    \"4. UPDATE SET - Expression missing\",\n    \"5. DELETE WHERE - Condition missing\",\n    \"6. WHERE IN - List values missing\",\n    \"7. JOINs - Not parsing join clauses\",\n    \"8. CASE - Not building properly\",\n    \"9. BETWEEN - Not handled\",\n    \"10. Bitwise operators - Not recognized\",\n    \"11. Variable expressions in SET - Not building\",\n]\n\nfor issue in issues:\n    print(f\"❌ {issue}\")\n\nprint(\"\\n\" + \"=\" * 70)\nprint(\"SUGGESTED FIX PRIORITY:\")\nprint(\"=\" * 70)\nprint(\"1. Fix expression builder to handle binary operators properly\")\nprint(\"2. Fix INSERT to capture all VALUES rows\")\nprint(\"3. Fix UPDATE to capture SET expressions\")\nprint(\"4. Fix DELETE to capture WHERE conditions\")\nprint(\"5. Add JOIN clause handling\")\nprint(\"6. Add CASE expression support\")\nprint(\"7. Add BETWEEN operator support\")\nprint(\"8. Add IN operator support with expression lists\")"
        }
    ]
}