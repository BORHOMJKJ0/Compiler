{
    "sourceFile": "show_fix.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1769012298201,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1769012298201,
            "name": "Commit-0",
            "content": "#!/usr/bin/env python\n# Quick demo script to show the fixed AST\nfrom antlr4 import *\nfrom BaseLexer import BaseLexer as MyBaseLexer\nfrom SQLParser import SQLParser as MyParser\nfrom builders.ast_builder import AstBuilder\nfrom dataclasses import asdict, is_dataclass\nimport json\n\ndef to_clean_dict(obj):\n    if is_dataclass(obj):\n        result = {\"type\": obj.__class__.__name__}\n        for k, v in asdict(obj).items():\n            cleaned = to_clean_dict(v)\n            if cleaned is not None and cleaned != \"\" and cleaned != []:\n                result[k] = cleaned\n        return result\n    elif isinstance(obj, list):\n        lst = [to_clean_dict(i) for i in obj]\n        return [i for i in lst if i not in (None, \"\", [])]\n    else:\n        return obj\n\n# Load train.sql\nwith open('train.sql', 'r') as f:\n    sql_code = f.read()\n\nlexer = MyBaseLexer(InputStream(sql_code))\nstream = CommonTokenStream(lexer)\nparser = MyParser(stream)\n\nbuilder = AstBuilder()\nast = builder.visitSqlScript(parser.sqlScript())\n\nprint(\"\\n✓ AST Building Fixed!\")\nprint(f\"✓ Parsed {len(ast)} statements\")\nprint(f\"\\n=== First SELECT Statement ===\")\n\n# Find first SELECT\nfor stmt in ast:\n    if hasattr(stmt, '__class__') and stmt.__class__.__name__ == 'SelectStatementNode':\n        ast_dict = to_clean_dict(stmt)\n        print(json.dumps(ast_dict, indent=2))\n        break\n"
        }
    ]
}