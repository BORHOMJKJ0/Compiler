{
    "sourceFile": "builders/statement_builder.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1768866063855,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1768866070040,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,340 @@\n+from builders.expression_builder import ExpressionBuilder\n+from builders.condition_builder import ConditionBuilder\n+\n+\n+class StatementBuilder:\n+    \"\"\"Builder for statement AST nodes\"\"\"\n+\n+    def __init__(self):\n+        self.expr_builder = ExpressionBuilder()\n+        self.cond_builder = ConditionBuilder()\n+\n+    def build_statement(self, ctx):\n+        \"\"\"Build a statement node from context\"\"\"\n+        # Handle semicolon as a valid but empty statement\n+        if ctx.getText() == ';':\n+            from dataclasses import dataclass\n+            @dataclass\n+            class SemicolonNode:\n+                type: str = \"Semicolon\"\n+            return SemicolonNode()\n+\n+        # Check for each possible statement type in the context\n+        if hasattr(ctx, 'ddlStatement') and ctx.ddlStatement():\n+            ddl = ctx.ddlStatement()\n+            if hasattr(ddl, 'createTableStatement') and ddl.createTableStatement():\n+                return self.build_create_table(ddl.createTableStatement())\n+            elif hasattr(ddl, 'alterTableStatement') and ddl.alterTableStatement():\n+                return self.build_alter_table(ddl.alterTableStatement())\n+                \n+        elif hasattr(ctx, 'dmlStatement') and ctx.dmlStatement():\n+            dml = ctx.dmlStatement()\n+            if hasattr(dml, 'selectStatement') and ddl.selectStatement() if 'ddl' in locals() else dml.selectStatement():\n+                return self.build_select(dml.selectStatement())\n+            elif hasattr(dml, 'insertStatement') and dml.insertStatement():\n+                return self.build_insert(dml.insertStatement())\n+            elif hasattr(dml, 'updateStatement') and dml.updateStatement():\n+                return self.build_update(dml.updateStatement())\n+            elif hasattr(dml, 'deleteStatement') and dml.deleteStatement():\n+                return self.build_delete(dml.deleteStatement())\n+                \n+        elif hasattr(ctx, 'controlFlowStatement') and ctx.controlFlowStatement():\n+            cf = ctx.controlFlowStatement()\n+            if hasattr(cf, 'ifStatement') and cf.ifStatement():\n+                return self.build_if(cf.ifStatement())\n+            elif hasattr(cf, 'tryCatchStatement') and cf.tryCatchStatement():\n+                return self.build_try_catch(cf.tryCatchStatement())\n+            elif hasattr(cf, 'blockStatement') and cf.blockStatement():\n+                return self.build_block(cf.blockStatement())\n+                \n+        elif hasattr(ctx, 'variableStatement') and ctx.variableStatement():\n+            var = ctx.variableStatement()\n+            if hasattr(var, 'declareStatement') and var.declareStatement():\n+                return self.build_declare(var.declareStatement())\n+            elif hasattr(var, 'setStatement') and var.setStatement():\n+                return self.build_set(var.setStatement())\n+                \n+        elif hasattr(ctx, 'execStatement') and ctx.execStatement():\n+            return self.build_exec(ctx.execStatement())\n+            \n+        elif hasattr(ctx, 'blockStatement') and ctx.blockStatement():\n+            return self.build_block(ctx.blockStatement())\n+            \n+        elif hasattr(ctx, 'goStatement') and ctx.goStatement():\n+            return self.build_go(ctx.goStatement())\n+            \n+        return None\n+\n+    def build_go(self, ctx):\n+        \"\"\"Build GO statement\"\"\"\n+        from Ast.statement_nodes import GoStatementNode\n+        return GoStatementNode(keywordGo=\"GO\")\n+\n+    def build_create_table(self, ctx):\n+        \"\"\"Build CREATE TABLE statement\"\"\"\n+        from Ast.statement_nodes import CreateTableStatementNode\n+        tableName = self.expr_builder.build_table_name(ctx.tableName())\n+        columns = self.build_column_definition_list(ctx.columnDefinitionList())\n+\n+        return CreateTableStatementNode(\n+            table_name=tableName,\n+            columns=columns,\n+            keywordCreate=\"CREATE\",\n+            keywordTable=\"TABLE\"\n+        )\n+\n+    def build_column_definition_list(self, ctx):\n+        \"\"\"Build column definition list\"\"\"\n+        columns = []\n+        for column in ctx.columnDefinition():\n+            clmn = self.build_column_definition(column)\n+            if clmn is not None:\n+                columns.append(clmn)\n+        return columns\n+\n+    def build_column_definition(self, ctx):\n+        \"\"\"Build column definition\"\"\"\n+        from Ast.statement_nodes import ColumnDefinitionNode\n+        columnName = ctx.columnName().getText()\n+        dataType = ctx.dataType().getText()\n+        columnConstraints = []\n+        if hasattr(ctx, 'constraint'):\n+            for constraint in ctx.constraint():\n+                clmn = self.build_column_constraint(constraint)\n+                if clmn is not None:\n+                    columnConstraints.append(clmn)\n+\n+        return ColumnDefinitionNode(\n+            column_name=columnName,\n+            data_type=dataType,\n+            constraints=columnConstraints\n+        )\n+\n+    def build_column_constraint(self, ctx):\n+        \"\"\"Build column constraint\"\"\"\n+        from Ast.statement_nodes import columnConstraintsNode\n+        text = ctx.getText()\n+        return columnConstraintsNode(keyword1=text, keyword2=None)\n+\n+    def build_alter_table(self, ctx):\n+        \"\"\"Build ALTER TABLE statement\"\"\"\n+        from Ast.statement_nodes import AlterTableStatementNode\n+        tableName = self.expr_builder.build_table_name(ctx.tableName())\n+        addColumnClause = self.build_add_column_clause(ctx.addColumnClause()) if hasattr(ctx, 'addColumnClause') and ctx.addColumnClause() else None\n+        dropConstraintClause = self.build_drop_constraint_clause(\n+            ctx.dropConstraintClause()) if hasattr(ctx, 'dropConstraintClause') and ctx.dropConstraintClause() else None\n+\n+        return AlterTableStatementNode(\n+            keywordAlter=\"ALTER\",\n+            keywordTable=\"TABLE\",\n+            table_name=tableName,\n+            addColumnClause=addColumnClause,\n+            dropConstraintClause=dropConstraintClause\n+        )\n+\n+    def build_add_column_clause(self, ctx):\n+        \"\"\"Build ADD COLUMN clause\"\"\"\n+        from Ast.statement_nodes import AddColumnClauseNode\n+        columnDefinition = self.build_column_definition(ctx.columnDefinition())\n+        return AddColumnClauseNode(keywordAdd=\"ADD\", columnDefinition=columnDefinition)\n+\n+    def build_drop_constraint_clause(self, ctx):\n+        \"\"\"Build DROP CONSTRAINT clause\"\"\"\n+        from Ast.statement_nodes import DropConstraintClauseNode\n+        constraintName = ctx.identifier().getText()\n+        return DropConstraintClauseNode(\n+            keywordDrop=\"DROP\",\n+            keywordConstrain=\"CONSTRAINT\",\n+            constraintName=constraintName\n+        )\n+\n+    def build_delete(self, ctx):\n+        \"\"\"Build DELETE statement\"\"\"\n+        from Ast.statement_nodes import DeleteStatementNode\n+        tableName = self.expr_builder.build_table_name(ctx.tableName()) if ctx.tableName() else None\n+        whereClause = self.build_where_clause(ctx.whereClause()) if hasattr(ctx, 'whereClause') and ctx.whereClause() else None\n+        return DeleteStatementNode(\n+            keywordDelete=\"DELETE\",\n+            tableName=tableName,\n+            fromClause=None,\n+            whereClause=whereClause\n+        )\n+\n+    def build_update(self, ctx):\n+        \"\"\"Build UPDATE statement\"\"\"\n+        from Ast.statement_nodes import UpdateStatementNode\n+        tableName = self.expr_builder.build_table_name(ctx.tableName()) if ctx.tableName() else None\n+        assignmentList = self.build_assignment_list(ctx.assignments()) if hasattr(ctx, 'assignments') and ctx.assignments() else []\n+        whereClause = self.build_where_clause(ctx.whereClause()) if hasattr(ctx, 'whereClause') and ctx.whereClause() else None\n+        return UpdateStatementNode(\n+            keywordUpdate=\"UPDATE\",\n+            tableName=tableName,\n+            assignmentList=assignmentList,\n+            whereClause=whereClause\n+        )\n+\n+    def build_assignment_list(self, ctx):\n+        \"\"\"Build assignment list\"\"\"\n+        assignments = []\n+        for assignment in ctx.assignment():\n+            assnment = self.build_assignment(assignment)\n+            if assnment is not None:\n+                assignments.append(assnment)\n+        return assignments\n+\n+    def build_assignment(self, ctx):\n+        \"\"\"Build assignment\"\"\"\n+        from Ast.statement_nodes import AssignmentNode\n+        columnName = ctx.columnName().getText()\n+        expression = self.expr_builder.build_expression(ctx.expression()) if ctx.expression() else None\n+        return AssignmentNode(columnName=columnName, expression=expression)\n+\n+    def build_where_clause(self, ctx):\n+        \"\"\"Build WHERE clause\"\"\"\n+        from Ast.statement_nodes import WhereClauseNode\n+        condition = self.cond_builder.build_condition(ctx.condition()) if ctx.condition() else None\n+        return WhereClauseNode(keywordWhere=\"WHERE\", condition=condition)\n+\n+    def build_select(self, ctx):\n+        \"\"\"Build SELECT statement\"\"\"\n+        from Ast.statement_nodes import SelectStatementNode\n+        selectList = self.build_select_list(ctx.selectList())\n+        return SelectStatementNode(\n+            keywordSelect=\"SELECT\",\n+            selectList=selectList,\n+            orderByClause=None,\n+            whereClause=None,\n+            fromClause=None\n+        )\n+\n+    def build_select_list(self, ctx):\n+        \"\"\"Build SELECT list\"\"\"\n+        selectItems = []\n+        for selectItem in ctx.selectItem():\n+            item = self.build_select_item(selectItem)\n+            if item is not None:\n+                selectItems.append(item)\n+        return selectItems\n+\n+    def build_select_item(self, ctx):\n+        \"\"\"Build SELECT item\"\"\"\n+        from Ast.statement_nodes import SelectItemNode\n+        expression = None\n+        if ctx.expression():\n+            expression = self.expr_builder.build_expression(ctx.expression())\n+        return SelectItemNode(\n+            expression=expression,\n+            keywordAs=None,\n+            identifier=None\n+        )\n+\n+    def build_insert(self, ctx):\n+        \"\"\"Build INSERT statement\"\"\"\n+        from Ast.statement_nodes import InsertStatement\n+        tableName = self.expr_builder.build_table_name(ctx.tableName())\n+        return InsertStatement(\n+            keywordInsert=\"INSERT\",\n+            tableName=tableName,\n+            keywordInto=\"INTO\",\n+            insertColumns=None,\n+            insertValues=None,\n+            selectStatement=None,\n+            execStatement=None\n+        )\n+\n+    def build_if(self, ctx):\n+        \"\"\"Build IF statement\"\"\"\n+        from Ast.statement_nodes import IfStatementNode\n+        keywordNot = \"NOT\" if \"NOT\" in ctx.getText().upper() else None\n+        keywordEXISTS = \"EXISTS\" if \"EXISTS\" in ctx.getText().upper() else None\n+        \n+        selectStatement = None\n+        if hasattr(ctx, 'selectStatement') and ctx.selectStatement():\n+            selectStatement = self.build_select(ctx.selectStatement())\n+            \n+        blockStatement = None\n+        if hasattr(ctx, 'blockStatement') and ctx.blockStatement():\n+            blockStatement = self.build_block(ctx.blockStatement())\n+        elif hasattr(ctx, 'statement') and ctx.statement():\n+            # If it's a single statement instead of a block\n+            blockStatement = self.build_statement(ctx.statement())\n+\n+        return IfStatementNode(\n+            keywordIf=\"IF\",\n+            selectStatement=selectStatement,\n+            blockStatement=blockStatement,\n+            keywordNot=keywordNot,\n+            keywordEXISTS=keywordEXISTS\n+        )\n+\n+    def build_block(self, ctx):\n+        \"\"\"Build block statement\"\"\"\n+        from Ast.statement_nodes import BlockStatementNode\n+        statements = []\n+        if hasattr(ctx, 'statement'):\n+            for stmt_ctx in ctx.statement():\n+                stmt = self.build_statement(stmt_ctx)\n+                if stmt:\n+                    statements.append(stmt)\n+                    \n+        return BlockStatementNode(\n+            keywordBegin=\"BEGIN\",\n+            statementList=statements,\n+            keywordEnd=\"END\"\n+        )\n+\n+    def build_try_catch(self, ctx):\n+        \"\"\"Build TRY-CATCH statement\"\"\"\n+        from Ast.statement_nodes import tryCatchStatementNode\n+        \n+        try_statements = []\n+        if hasattr(ctx, 'statement'):\n+            # Simple approach: collect all statements\n+            for stmt_ctx in ctx.statement():\n+                stmt = self.build_statement(stmt_ctx)\n+                if stmt:\n+                    try_statements.append(stmt)\n+\n+        return tryCatchStatementNode(\n+            keywordBeginForTry=\"BEGIN\",\n+            keywordBeginTry=\"TRY\",\n+            tryStatementList=try_statements,\n+            keywordEndForTry=\"END\",\n+            keywordEndTry=\"TRY\",\n+            keywordBeginForCatch=\"BEGIN\",\n+            keywordBeginCatch=\"CATCH\",\n+            catchStatementList=[],\n+            keywordEndForCatch=\"END\",\n+            keywordEndCatch=\"CATCH\"\n+        )\n+\n+    def build_declare(self, ctx):\n+        from Ast.statement_nodes import declareStatementNode\n+        return declareStatementNode(\n+            keywordDeclare=\"DECLARE\",\n+            variableName=ctx.VARIABLE().getText(),\n+            dataType=ctx.dataType().getText(),\n+            operator=None,\n+            expression=None\n+        )\n+\n+    def build_set(self, ctx):\n+        from Ast.statement_nodes import setStatementNode\n+        variableName = ctx.VARIABLE().getText() if ctx.VARIABLE() else ctx.columnName().getText()\n+        expression = self.expr_builder.build_expression(ctx.expression()) if hasattr(ctx, 'expression') and ctx.expression() else None\n+        \n+        return setStatementNode(\n+            keywordSet=\"SET\",\n+            variableName=variableName,\n+            operator=\"=\",\n+            expression=expression\n+        )\n+\n+    def build_exec(self, ctx):\n+        from Ast.statement_nodes import execStatementNode\n+        identifier = ctx.getChild(1).getText()\n+        return execStatementNode(\n+            keywordExec=\"EXEC\",\n+            identifier=identifier,\n+            expressionList=None\n+        )\n"
                },
                {
                    "date": 1768866079970,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -242,9 +242,8 @@\n             execStatement=None\n         )\n \n     def build_if(self, ctx):\n-        \"\"\"Build IF statement\"\"\"\n         from Ast.statement_nodes import IfStatementNode\n         keywordNot = \"NOT\" if \"NOT\" in ctx.getText().upper() else None\n         keywordEXISTS = \"EXISTS\" if \"EXISTS\" in ctx.getText().upper() else None\n         \n@@ -267,9 +266,8 @@\n             keywordEXISTS=keywordEXISTS\n         )\n \n     def build_block(self, ctx):\n-        \"\"\"Build block statement\"\"\"\n         from Ast.statement_nodes import BlockStatementNode\n         statements = []\n         if hasattr(ctx, 'statement'):\n             for stmt_ctx in ctx.statement():\n@@ -283,9 +281,8 @@\n             keywordEnd=\"END\"\n         )\n \n     def build_try_catch(self, ctx):\n-        \"\"\"Build TRY-CATCH statement\"\"\"\n         from Ast.statement_nodes import tryCatchStatementNode\n         \n         try_statements = []\n         if hasattr(ctx, 'statement'):\n@@ -337,346 +334,4 @@\n             keywordExec=\"EXEC\",\n             identifier=identifier,\n             expressionList=None\n         )\n-from builders.expression_builder import ExpressionBuilder\n-from builders.condition_builder import ConditionBuilder\n-\n-\n-class StatementBuilder:\n-    \"\"\"Builder for statement AST nodes\"\"\"\n-\n-    def __init__(self):\n-        self.expr_builder = ExpressionBuilder()\n-        self.cond_builder = ConditionBuilder()\n-\n-    def build_statement(self, ctx):\n-        \"\"\"Build a statement node from context\"\"\"\n-        # Handle semicolon as a valid but empty statement\n-        if ctx.getText() == ';':\n-            from dataclasses import dataclass\n-            @dataclass\n-            class SemicolonNode:\n-                type: str = \"Semicolon\"\n-            return SemicolonNode()\n-\n-        # Check for each possible statement type in the context\n-        if hasattr(ctx, 'ddlStatement') and ctx.ddlStatement():\n-            ddl = ctx.ddlStatement()\n-            if hasattr(ddl, 'createTableStatement') and ddl.createTableStatement():\n-                return self.build_create_table(ddl.createTableStatement())\n-            elif hasattr(ddl, 'alterTableStatement') and ddl.alterTableStatement():\n-                return self.build_alter_table(ddl.alterTableStatement())\n-                \n-        elif hasattr(ctx, 'dmlStatement') and ctx.dmlStatement():\n-            dml = ctx.dmlStatement()\n-            if hasattr(dml, 'selectStatement') and ddl.selectStatement() if 'ddl' in locals() else dml.selectStatement():\n-                return self.build_select(dml.selectStatement())\n-            elif hasattr(dml, 'insertStatement') and dml.insertStatement():\n-                return self.build_insert(dml.insertStatement())\n-            elif hasattr(dml, 'updateStatement') and dml.updateStatement():\n-                return self.build_update(dml.updateStatement())\n-            elif hasattr(dml, 'deleteStatement') and dml.deleteStatement():\n-                return self.build_delete(dml.deleteStatement())\n-                \n-        elif hasattr(ctx, 'controlFlowStatement') and ctx.controlFlowStatement():\n-            cf = ctx.controlFlowStatement()\n-            if hasattr(cf, 'ifStatement') and cf.ifStatement():\n-                return self.build_if(cf.ifStatement())\n-            elif hasattr(cf, 'tryCatchStatement') and cf.tryCatchStatement():\n-                return self.build_try_catch(cf.tryCatchStatement())\n-            elif hasattr(cf, 'blockStatement') and cf.blockStatement():\n-                return self.build_block(cf.blockStatement())\n-                \n-        elif hasattr(ctx, 'variableStatement') and ctx.variableStatement():\n-            var = ctx.variableStatement()\n-            if hasattr(var, 'declareStatement') and var.declareStatement():\n-                return self.build_declare(var.declareStatement())\n-            elif hasattr(var, 'setStatement') and var.setStatement():\n-                return self.build_set(var.setStatement())\n-                \n-        elif hasattr(ctx, 'execStatement') and ctx.execStatement():\n-            return self.build_exec(ctx.execStatement())\n-            \n-        elif hasattr(ctx, 'blockStatement') and ctx.blockStatement():\n-            return self.build_block(ctx.blockStatement())\n-            \n-        elif hasattr(ctx, 'goStatement') and ctx.goStatement():\n-            return self.build_go(ctx.goStatement())\n-            \n-        return None\n-\n-    def build_go(self, ctx):\n-        \"\"\"Build GO statement\"\"\"\n-        from Ast.statement_nodes import GoStatementNode\n-        return GoStatementNode(keywordGo=\"GO\")\n-\n-    def build_create_table(self, ctx):\n-        \"\"\"Build CREATE TABLE statement\"\"\"\n-        from Ast.statement_nodes import CreateTableStatementNode\n-        tableName = self.expr_builder.build_table_name(ctx.tableName())\n-        columns = self.build_column_definition_list(ctx.columnDefinitionList())\n-\n-        return CreateTableStatementNode(\n-            table_name=tableName,\n-            columns=columns,\n-            keywordCreate=\"CREATE\",\n-            keywordTable=\"TABLE\"\n-        )\n-\n-    def build_column_definition_list(self, ctx):\n-        \"\"\"Build column definition list\"\"\"\n-        columns = []\n-        for column in ctx.columnDefinition():\n-            clmn = self.build_column_definition(column)\n-            if clmn is not None:\n-                columns.append(clmn)\n-        return columns\n-\n-    def build_column_definition(self, ctx):\n-        \"\"\"Build column definition\"\"\"\n-        from Ast.statement_nodes import ColumnDefinitionNode\n-        columnName = ctx.columnName().getText()\n-        dataType = ctx.dataType().getText()\n-        columnConstraints = []\n-        if hasattr(ctx, 'constraint'):\n-            for constraint in ctx.constraint():\n-                clmn = self.build_column_constraint(constraint)\n-                if clmn is not None:\n-                    columnConstraints.append(clmn)\n-\n-        return ColumnDefinitionNode(\n-            column_name=columnName,\n-            data_type=dataType,\n-            constraints=columnConstraints\n-        )\n-\n-    def build_column_constraint(self, ctx):\n-        \"\"\"Build column constraint\"\"\"\n-        from Ast.statement_nodes import columnConstraintsNode\n-        text = ctx.getText()\n-        return columnConstraintsNode(keyword1=text, keyword2=None)\n-\n-    def build_alter_table(self, ctx):\n-        \"\"\"Build ALTER TABLE statement\"\"\"\n-        from Ast.statement_nodes import AlterTableStatementNode\n-        tableName = self.expr_builder.build_table_name(ctx.tableName())\n-        addColumnClause = self.build_add_column_clause(ctx.addColumnClause()) if hasattr(ctx, 'addColumnClause') and ctx.addColumnClause() else None\n-        dropConstraintClause = self.build_drop_constraint_clause(\n-            ctx.dropConstraintClause()) if hasattr(ctx, 'dropConstraintClause') and ctx.dropConstraintClause() else None\n-\n-        return AlterTableStatementNode(\n-            keywordAlter=\"ALTER\",\n-            keywordTable=\"TABLE\",\n-            table_name=tableName,\n-            addColumnClause=addColumnClause,\n-            dropConstraintClause=dropConstraintClause\n-        )\n-\n-    def build_add_column_clause(self, ctx):\n-        \"\"\"Build ADD COLUMN clause\"\"\"\n-        from Ast.statement_nodes import AddColumnClauseNode\n-        columnDefinition = self.build_column_definition(ctx.columnDefinition())\n-        return AddColumnClauseNode(keywordAdd=\"ADD\", columnDefinition=columnDefinition)\n-\n-    def build_drop_constraint_clause(self, ctx):\n-        \"\"\"Build DROP CONSTRAINT clause\"\"\"\n-        from Ast.statement_nodes import DropConstraintClauseNode\n-        constraintName = ctx.identifier().getText()\n-        return DropConstraintClauseNode(\n-            keywordDrop=\"DROP\",\n-            keywordConstrain=\"CONSTRAINT\",\n-            constraintName=constraintName\n-        )\n-\n-    def build_delete(self, ctx):\n-        \"\"\"Build DELETE statement\"\"\"\n-        from Ast.statement_nodes import DeleteStatementNode\n-        tableName = self.expr_builder.build_table_name(ctx.tableName()) if ctx.tableName() else None\n-        whereClause = self.build_where_clause(ctx.whereClause()) if hasattr(ctx, 'whereClause') and ctx.whereClause() else None\n-        return DeleteStatementNode(\n-            keywordDelete=\"DELETE\",\n-            tableName=tableName,\n-            fromClause=None,\n-            whereClause=whereClause\n-        )\n-\n-    def build_update(self, ctx):\n-        \"\"\"Build UPDATE statement\"\"\"\n-        from Ast.statement_nodes import UpdateStatementNode\n-        tableName = self.expr_builder.build_table_name(ctx.tableName()) if ctx.tableName() else None\n-        assignmentList = self.build_assignment_list(ctx.assignments()) if hasattr(ctx, 'assignments') and ctx.assignments() else []\n-        whereClause = self.build_where_clause(ctx.whereClause()) if hasattr(ctx, 'whereClause') and ctx.whereClause() else None\n-        return UpdateStatementNode(\n-            keywordUpdate=\"UPDATE\",\n-            tableName=tableName,\n-            assignmentList=assignmentList,\n-            whereClause=whereClause\n-        )\n-\n-    def build_assignment_list(self, ctx):\n-        \"\"\"Build assignment list\"\"\"\n-        assignments = []\n-        for assignment in ctx.assignment():\n-            assnment = self.build_assignment(assignment)\n-            if assnment is not None:\n-                assignments.append(assnment)\n-        return assignments\n-\n-    def build_assignment(self, ctx):\n-        \"\"\"Build assignment\"\"\"\n-        from Ast.statement_nodes import AssignmentNode\n-        columnName = ctx.columnName().getText()\n-        expression = self.expr_builder.build_expression(ctx.expression()) if ctx.expression() else None\n-        return AssignmentNode(columnName=columnName, expression=expression)\n-\n-    def build_where_clause(self, ctx):\n-        \"\"\"Build WHERE clause\"\"\"\n-        from Ast.statement_nodes import WhereClauseNode\n-        condition = self.cond_builder.build_condition(ctx.condition()) if ctx.condition() else None\n-        return WhereClauseNode(keywordWhere=\"WHERE\", condition=condition)\n-\n-    def build_select(self, ctx):\n-        \"\"\"Build SELECT statement\"\"\"\n-        from Ast.statement_nodes import SelectStatementNode\n-        selectList = self.build_select_list(ctx.selectList())\n-        return SelectStatementNode(\n-            keywordSelect=\"SELECT\",\n-            selectList=selectList,\n-            orderByClause=None,\n-            whereClause=None,\n-            fromClause=None\n-        )\n-\n-    def build_select_list(self, ctx):\n-        \"\"\"Build SELECT list\"\"\"\n-        selectItems = []\n-        for selectItem in ctx.selectItem():\n-            item = self.build_select_item(selectItem)\n-            if item is not None:\n-                selectItems.append(item)\n-        return selectItems\n-\n-    def build_select_item(self, ctx):\n-        \"\"\"Build SELECT item\"\"\"\n-        from Ast.statement_nodes import SelectItemNode\n-        expression = None\n-        if ctx.expression():\n-            expression = self.expr_builder.build_expression(ctx.expression())\n-        return SelectItemNode(\n-            expression=expression,\n-            keywordAs=None,\n-            identifier=None\n-        )\n-\n-    def build_insert(self, ctx):\n-        \"\"\"Build INSERT statement\"\"\"\n-        from Ast.statement_nodes import InsertStatement\n-        tableName = self.expr_builder.build_table_name(ctx.tableName())\n-        return InsertStatement(\n-            keywordInsert=\"INSERT\",\n-            tableName=tableName,\n-            keywordInto=\"INTO\",\n-            insertColumns=None,\n-            insertValues=None,\n-            selectStatement=None,\n-            execStatement=None\n-        )\n-\n-    def build_if(self, ctx):\n-        \"\"\"Build IF statement\"\"\"\n-        from Ast.statement_nodes import IfStatementNode\n-        keywordNot = \"NOT\" if \"NOT\" in ctx.getText().upper() else None\n-        keywordEXISTS = \"EXISTS\" if \"EXISTS\" in ctx.getText().upper() else None\n-        \n-        selectStatement = None\n-        if hasattr(ctx, 'selectStatement') and ctx.selectStatement():\n-            selectStatement = self.build_select(ctx.selectStatement())\n-            \n-        blockStatement = None\n-        if hasattr(ctx, 'blockStatement') and ctx.blockStatement():\n-            blockStatement = self.build_block(ctx.blockStatement())\n-        elif hasattr(ctx, 'statement') and ctx.statement():\n-            # If it's a single statement instead of a block\n-            blockStatement = self.build_statement(ctx.statement())\n-\n-        return IfStatementNode(\n-            keywordIf=\"IF\",\n-            selectStatement=selectStatement,\n-            blockStatement=blockStatement,\n-            keywordNot=keywordNot,\n-            keywordEXISTS=keywordEXISTS\n-        )\n-\n-    def build_block(self, ctx):\n-        \"\"\"Build block statement\"\"\"\n-        from Ast.statement_nodes import BlockStatementNode\n-        statements = []\n-        if hasattr(ctx, 'statement'):\n-            for stmt_ctx in ctx.statement():\n-                stmt = self.build_statement(stmt_ctx)\n-                if stmt:\n-                    statements.append(stmt)\n-                    \n-        return BlockStatementNode(\n-            keywordBegin=\"BEGIN\",\n-            statementList=statements,\n-            keywordEnd=\"END\"\n-        )\n-\n-    def build_try_catch(self, ctx):\n-        \"\"\"Build TRY-CATCH statement\"\"\"\n-        from Ast.statement_nodes import tryCatchStatementNode\n-        \n-        try_statements = []\n-        if hasattr(ctx, 'statement'):\n-            # Simple approach: collect all statements\n-            for stmt_ctx in ctx.statement():\n-                stmt = self.build_statement(stmt_ctx)\n-                if stmt:\n-                    try_statements.append(stmt)\n-\n-        return tryCatchStatementNode(\n-            keywordBeginForTry=\"BEGIN\",\n-            keywordBeginTry=\"TRY\",\n-            tryStatementList=try_statements,\n-            keywordEndForTry=\"END\",\n-            keywordEndTry=\"TRY\",\n-            keywordBeginForCatch=\"BEGIN\",\n-            keywordBeginCatch=\"CATCH\",\n-            catchStatementList=[],\n-            keywordEndForCatch=\"END\",\n-            keywordEndCatch=\"CATCH\"\n-        )\n-\n-    def build_declare(self, ctx):\n-        \"\"\"Build DECLARE statement\"\"\"\n-        from Ast.statement_nodes import declareStatementNode\n-        return declareStatementNode(\n-            keywordDeclare=\"DECLARE\",\n-            variableName=ctx.VARIABLE().getText(),\n-            dataType=ctx.dataType().getText(),\n-            operator=None,\n-            expression=None\n-        )\n-\n-    def build_set(self, ctx):\n-        \"\"\"Build SET statement\"\"\"\n-        from Ast.statement_nodes import setStatementNode\n-        variableName = ctx.VARIABLE().getText() if ctx.VARIABLE() else ctx.columnName().getText()\n-        expression = self.expr_builder.build_expression(ctx.expression()) if hasattr(ctx, 'expression') and ctx.expression() else None\n-        \n-        return setStatementNode(\n-            keywordSet=\"SET\",\n-            variableName=variableName,\n-            operator=\"=\",\n-            expression=expression\n-        )\n-\n-    def build_exec(self, ctx):\n-        from Ast.statement_nodes import execStatementNode\n-        identifier = ctx.getChild(1).getText()\n-        return execStatementNode(\n-            keywordExec=\"EXEC\",\n-            identifier=identifier,\n-            expressionList=None\n-        )\n"
                },
                {
                    "date": 1768866087098,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -207,18 +207,16 @@\n             fromClause=None\n         )\n \n     def build_select_list(self, ctx):\n-        \"\"\"Build SELECT list\"\"\"\n         selectItems = []\n         for selectItem in ctx.selectItem():\n             item = self.build_select_item(selectItem)\n             if item is not None:\n                 selectItems.append(item)\n         return selectItems\n \n     def build_select_item(self, ctx):\n-        \"\"\"Build SELECT item\"\"\"\n         from Ast.statement_nodes import SelectItemNode\n         expression = None\n         if ctx.expression():\n             expression = self.expr_builder.build_expression(ctx.expression())\n@@ -228,9 +226,8 @@\n             identifier=None\n         )\n \n     def build_insert(self, ctx):\n-        \"\"\"Build INSERT statement\"\"\"\n         from Ast.statement_nodes import InsertStatement\n         tableName = self.expr_builder.build_table_name(ctx.tableName())\n         return InsertStatement(\n             keywordInsert=\"INSERT\",\n"
                },
                {
                    "date": 1768866093606,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -182,22 +182,19 @@\n                 assignments.append(assnment)\n         return assignments\n \n     def build_assignment(self, ctx):\n-        \"\"\"Build assignment\"\"\"\n         from Ast.statement_nodes import AssignmentNode\n         columnName = ctx.columnName().getText()\n         expression = self.expr_builder.build_expression(ctx.expression()) if ctx.expression() else None\n         return AssignmentNode(columnName=columnName, expression=expression)\n \n     def build_where_clause(self, ctx):\n-        \"\"\"Build WHERE clause\"\"\"\n         from Ast.statement_nodes import WhereClauseNode\n         condition = self.cond_builder.build_condition(ctx.condition()) if ctx.condition() else None\n         return WhereClauseNode(keywordWhere=\"WHERE\", condition=condition)\n \n     def build_select(self, ctx):\n-        \"\"\"Build SELECT statement\"\"\"\n         from Ast.statement_nodes import SelectStatementNode\n         selectList = self.build_select_list(ctx.selectList())\n         return SelectStatementNode(\n             keywordSelect=\"SELECT\",\n"
                },
                {
                    "date": 1768866101001,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -148,9 +148,8 @@\n             constraintName=constraintName\n         )\n \n     def build_delete(self, ctx):\n-        \"\"\"Build DELETE statement\"\"\"\n         from Ast.statement_nodes import DeleteStatementNode\n         tableName = self.expr_builder.build_table_name(ctx.tableName()) if ctx.tableName() else None\n         whereClause = self.build_where_clause(ctx.whereClause()) if hasattr(ctx, 'whereClause') and ctx.whereClause() else None\n         return DeleteStatementNode(\n@@ -160,9 +159,8 @@\n             whereClause=whereClause\n         )\n \n     def build_update(self, ctx):\n-        \"\"\"Build UPDATE statement\"\"\"\n         from Ast.statement_nodes import UpdateStatementNode\n         tableName = self.expr_builder.build_table_name(ctx.tableName()) if ctx.tableName() else None\n         assignmentList = self.build_assignment_list(ctx.assignments()) if hasattr(ctx, 'assignments') and ctx.assignments() else []\n         whereClause = self.build_where_clause(ctx.whereClause()) if hasattr(ctx, 'whereClause') and ctx.whereClause() else None\n@@ -173,9 +171,8 @@\n             whereClause=whereClause\n         )\n \n     def build_assignment_list(self, ctx):\n-        \"\"\"Build assignment list\"\"\"\n         assignments = []\n         for assignment in ctx.assignment():\n             assnment = self.build_assignment(assignment)\n             if assnment is not None:\n"
                },
                {
                    "date": 1768866107048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,8 @@\n         text = ctx.getText()\n         return columnConstraintsNode(keyword1=text, keyword2=None)\n \n     def build_alter_table(self, ctx):\n-        \"\"\"Build ALTER TABLE statement\"\"\"\n         from Ast.statement_nodes import AlterTableStatementNode\n         tableName = self.expr_builder.build_table_name(ctx.tableName())\n         addColumnClause = self.build_add_column_clause(ctx.addColumnClause()) if hasattr(ctx, 'addColumnClause') and ctx.addColumnClause() else None\n         dropConstraintClause = self.build_drop_constraint_clause(\n@@ -132,15 +131,13 @@\n             dropConstraintClause=dropConstraintClause\n         )\n \n     def build_add_column_clause(self, ctx):\n-        \"\"\"Build ADD COLUMN clause\"\"\"\n         from Ast.statement_nodes import AddColumnClauseNode\n         columnDefinition = self.build_column_definition(ctx.columnDefinition())\n         return AddColumnClauseNode(keywordAdd=\"ADD\", columnDefinition=columnDefinition)\n \n     def build_drop_constraint_clause(self, ctx):\n-        \"\"\"Build DROP CONSTRAINT clause\"\"\"\n         from Ast.statement_nodes import DropConstraintClauseNode\n         constraintName = ctx.identifier().getText()\n         return DropConstraintClauseNode(\n             keywordDrop=\"DROP\",\n"
                },
                {
                    "date": 1768866113785,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,18 +83,16 @@\n             keywordTable=\"TABLE\"\n         )\n \n     def build_column_definition_list(self, ctx):\n-        \"\"\"Build column definition list\"\"\"\n         columns = []\n         for column in ctx.columnDefinition():\n             clmn = self.build_column_definition(column)\n             if clmn is not None:\n                 columns.append(clmn)\n         return columns\n \n     def build_column_definition(self, ctx):\n-        \"\"\"Build column definition\"\"\"\n         from Ast.statement_nodes import ColumnDefinitionNode\n         columnName = ctx.columnName().getText()\n         dataType = ctx.dataType().getText()\n         columnConstraints = []\n@@ -110,9 +108,8 @@\n             constraints=columnConstraints\n         )\n \n     def build_column_constraint(self, ctx):\n-        \"\"\"Build column constraint\"\"\"\n         from Ast.statement_nodes import columnConstraintsNode\n         text = ctx.getText()\n         return columnConstraintsNode(keyword1=text, keyword2=None)\n \n"
                },
                {
                    "date": 1768866123011,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,8 @@\n         self.expr_builder = ExpressionBuilder()\n         self.cond_builder = ConditionBuilder()\n \n     def build_statement(self, ctx):\n-        \"\"\"Build a statement node from context\"\"\"\n         # Handle semicolon as a valid but empty statement\n         if ctx.getText() == ';':\n             from dataclasses import dataclass\n             @dataclass\n@@ -65,14 +64,12 @@\n             \n         return None\n \n     def build_go(self, ctx):\n-        \"\"\"Build GO statement\"\"\"\n         from Ast.statement_nodes import GoStatementNode\n         return GoStatementNode(keywordGo=\"GO\")\n \n     def build_create_table(self, ctx):\n-        \"\"\"Build CREATE TABLE statement\"\"\"\n         from Ast.statement_nodes import CreateTableStatementNode\n         tableName = self.expr_builder.build_table_name(ctx.tableName())\n         columns = self.build_column_definition_list(ctx.columnDefinitionList())\n \n"
                }
            ],
            "date": 1768866063855,
            "name": "Commit-0",
            "content": "from builders.expression_builder import ExpressionBuilder\nfrom builders.condition_builder import ConditionBuilder\n\n\nclass StatementBuilder:\n    \"\"\"Builder for statement AST nodes\"\"\"\n\n    def __init__(self):\n        self.expr_builder = ExpressionBuilder()\n        self.cond_builder = ConditionBuilder()\n\n    def build_statement(self, ctx):\n        \"\"\"Build a statement node from context\"\"\"\n        # Handle semicolon as a valid but empty statement\n        if ctx.getText() == ';':\n            from dataclasses import dataclass\n            @dataclass\n            class SemicolonNode:\n                type: str = \"Semicolon\"\n            return SemicolonNode()\n\n        # Check for each possible statement type in the context\n        if hasattr(ctx, 'ddlStatement') and ctx.ddlStatement():\n            ddl = ctx.ddlStatement()\n            if hasattr(ddl, 'createTableStatement') and ddl.createTableStatement():\n                return self.build_create_table(ddl.createTableStatement())\n            elif hasattr(ddl, 'alterTableStatement') and ddl.alterTableStatement():\n                return self.build_alter_table(ddl.alterTableStatement())\n                \n        elif hasattr(ctx, 'dmlStatement') and ctx.dmlStatement():\n            dml = ctx.dmlStatement()\n            if hasattr(dml, 'selectStatement') and ddl.selectStatement() if 'ddl' in locals() else dml.selectStatement():\n                return self.build_select(dml.selectStatement())\n            elif hasattr(dml, 'insertStatement') and dml.insertStatement():\n                return self.build_insert(dml.insertStatement())\n            elif hasattr(dml, 'updateStatement') and dml.updateStatement():\n                return self.build_update(dml.updateStatement())\n            elif hasattr(dml, 'deleteStatement') and dml.deleteStatement():\n                return self.build_delete(dml.deleteStatement())\n                \n        elif hasattr(ctx, 'controlFlowStatement') and ctx.controlFlowStatement():\n            cf = ctx.controlFlowStatement()\n            if hasattr(cf, 'ifStatement') and cf.ifStatement():\n                return self.build_if(cf.ifStatement())\n            elif hasattr(cf, 'tryCatchStatement') and cf.tryCatchStatement():\n                return self.build_try_catch(cf.tryCatchStatement())\n            elif hasattr(cf, 'blockStatement') and cf.blockStatement():\n                return self.build_block(cf.blockStatement())\n                \n        elif hasattr(ctx, 'variableStatement') and ctx.variableStatement():\n            var = ctx.variableStatement()\n            if hasattr(var, 'declareStatement') and var.declareStatement():\n                return self.build_declare(var.declareStatement())\n            elif hasattr(var, 'setStatement') and var.setStatement():\n                return self.build_set(var.setStatement())\n                \n        elif hasattr(ctx, 'execStatement') and ctx.execStatement():\n            return self.build_exec(ctx.execStatement())\n            \n        elif hasattr(ctx, 'blockStatement') and ctx.blockStatement():\n            return self.build_block(ctx.blockStatement())\n            \n        elif hasattr(ctx, 'goStatement') and ctx.goStatement():\n            return self.build_go(ctx.goStatement())\n            \n        return None\n\n    def build_go(self, ctx):\n        \"\"\"Build GO statement\"\"\"\n        from Ast.statement_nodes import GoStatementNode\n        return GoStatementNode(keywordGo=\"GO\")\n\n    def build_create_table(self, ctx):\n        \"\"\"Build CREATE TABLE statement\"\"\"\n        from Ast.statement_nodes import CreateTableStatementNode\n        tableName = self.expr_builder.build_table_name(ctx.tableName())\n        columns = self.build_column_definition_list(ctx.columnDefinitionList())\n\n        return CreateTableStatementNode(\n            table_name=tableName,\n            columns=columns,\n            keywordCreate=\"CREATE\",\n            keywordTable=\"TABLE\"\n        )\n\n    def build_column_definition_list(self, ctx):\n        \"\"\"Build column definition list\"\"\"\n        columns = []\n        for column in ctx.columnDefinition():\n            clmn = self.build_column_definition(column)\n            if clmn is not None:\n                columns.append(clmn)\n        return columns\n\n    def build_column_definition(self, ctx):\n        \"\"\"Build column definition\"\"\"\n        from Ast.statement_nodes import ColumnDefinitionNode\n        columnName = ctx.columnName().getText()\n        dataType = ctx.dataType().getText()\n        columnConstraints = []\n        if hasattr(ctx, 'constraint'):\n            for constraint in ctx.constraint():\n                clmn = self.build_column_constraint(constraint)\n                if clmn is not None:\n                    columnConstraints.append(clmn)\n\n        return ColumnDefinitionNode(\n            column_name=columnName,\n            data_type=dataType,\n            constraints=columnConstraints\n        )\n\n    def build_column_constraint(self, ctx):\n        \"\"\"Build column constraint\"\"\"\n        from Ast.statement_nodes import columnConstraintsNode\n        text = ctx.getText()\n        return columnConstraintsNode(keyword1=text, keyword2=None)\n\n    def build_alter_table(self, ctx):\n        \"\"\"Build ALTER TABLE statement\"\"\"\n        from Ast.statement_nodes import AlterTableStatementNode\n        tableName = self.expr_builder.build_table_name(ctx.tableName())\n        addColumnClause = self.build_add_column_clause(ctx.addColumnClause()) if hasattr(ctx, 'addColumnClause') and ctx.addColumnClause() else None\n        dropConstraintClause = self.build_drop_constraint_clause(\n            ctx.dropConstraintClause()) if hasattr(ctx, 'dropConstraintClause') and ctx.dropConstraintClause() else None\n\n        return AlterTableStatementNode(\n            keywordAlter=\"ALTER\",\n            keywordTable=\"TABLE\",\n            table_name=tableName,\n            addColumnClause=addColumnClause,\n            dropConstraintClause=dropConstraintClause\n        )\n\n    def build_add_column_clause(self, ctx):\n        \"\"\"Build ADD COLUMN clause\"\"\"\n        from Ast.statement_nodes import AddColumnClauseNode\n        columnDefinition = self.build_column_definition(ctx.columnDefinition())\n        return AddColumnClauseNode(keywordAdd=\"ADD\", columnDefinition=columnDefinition)\n\n    def build_drop_constraint_clause(self, ctx):\n        \"\"\"Build DROP CONSTRAINT clause\"\"\"\n        from Ast.statement_nodes import DropConstraintClauseNode\n        constraintName = ctx.identifier().getText()\n        return DropConstraintClauseNode(\n            keywordDrop=\"DROP\",\n            keywordConstrain=\"CONSTRAINT\",\n            constraintName=constraintName\n        )\n\n    def build_delete(self, ctx):\n        \"\"\"Build DELETE statement\"\"\"\n        from Ast.statement_nodes import DeleteStatementNode\n        tableName = self.expr_builder.build_table_name(ctx.tableName()) if ctx.tableName() else None\n        whereClause = self.build_where_clause(ctx.whereClause()) if hasattr(ctx, 'whereClause') and ctx.whereClause() else None\n        return DeleteStatementNode(\n            keywordDelete=\"DELETE\",\n            tableName=tableName,\n            fromClause=None,\n            whereClause=whereClause\n        )\n\n    def build_update(self, ctx):\n        \"\"\"Build UPDATE statement\"\"\"\n        from Ast.statement_nodes import UpdateStatementNode\n        tableName = self.expr_builder.build_table_name(ctx.tableName()) if ctx.tableName() else None\n        assignmentList = self.build_assignment_list(ctx.assignments()) if hasattr(ctx, 'assignments') and ctx.assignments() else []\n        whereClause = self.build_where_clause(ctx.whereClause()) if hasattr(ctx, 'whereClause') and ctx.whereClause() else None\n        return UpdateStatementNode(\n            keywordUpdate=\"UPDATE\",\n            tableName=tableName,\n            assignmentList=assignmentList,\n            whereClause=whereClause\n        )\n\n    def build_assignment_list(self, ctx):\n        \"\"\"Build assignment list\"\"\"\n        assignments = []\n        for assignment in ctx.assignment():\n            assnment = self.build_assignment(assignment)\n            if assnment is not None:\n                assignments.append(assnment)\n        return assignments\n\n    def build_assignment(self, ctx):\n        \"\"\"Build assignment\"\"\"\n        from Ast.statement_nodes import AssignmentNode\n        columnName = ctx.columnName().getText()\n        expression = self.expr_builder.build_expression(ctx.expression()) if ctx.expression() else None\n        return AssignmentNode(columnName=columnName, expression=expression)\n\n    def build_where_clause(self, ctx):\n        \"\"\"Build WHERE clause\"\"\"\n        from Ast.statement_nodes import WhereClauseNode\n        condition = self.cond_builder.build_condition(ctx.condition()) if ctx.condition() else None\n        return WhereClauseNode(keywordWhere=\"WHERE\", condition=condition)\n\n    def build_select(self, ctx):\n        \"\"\"Build SELECT statement\"\"\"\n        from Ast.statement_nodes import SelectStatementNode\n        selectList = self.build_select_list(ctx.selectList())\n        return SelectStatementNode(\n            keywordSelect=\"SELECT\",\n            selectList=selectList,\n            orderByClause=None,\n            whereClause=None,\n            fromClause=None\n        )\n\n    def build_select_list(self, ctx):\n        \"\"\"Build SELECT list\"\"\"\n        selectItems = []\n        for selectItem in ctx.selectItem():\n            item = self.build_select_item(selectItem)\n            if item is not None:\n                selectItems.append(item)\n        return selectItems\n\n    def build_select_item(self, ctx):\n        \"\"\"Build SELECT item\"\"\"\n        from Ast.statement_nodes import SelectItemNode\n        expression = None\n        if ctx.expression():\n            expression = self.expr_builder.build_expression(ctx.expression())\n        return SelectItemNode(\n            expression=expression,\n            keywordAs=None,\n            identifier=None\n        )\n\n    def build_insert(self, ctx):\n        \"\"\"Build INSERT statement\"\"\"\n        from Ast.statement_nodes import InsertStatement\n        tableName = self.expr_builder.build_table_name(ctx.tableName())\n        return InsertStatement(\n            keywordInsert=\"INSERT\",\n            tableName=tableName,\n            keywordInto=\"INTO\",\n            insertColumns=None,\n            insertValues=None,\n            selectStatement=None,\n            execStatement=None\n        )\n\n    def build_if(self, ctx):\n        \"\"\"Build IF statement\"\"\"\n        from Ast.statement_nodes import IfStatementNode\n        keywordNot = \"NOT\" if \"NOT\" in ctx.getText().upper() else None\n        keywordEXISTS = \"EXISTS\" if \"EXISTS\" in ctx.getText().upper() else None\n        \n        selectStatement = None\n        if hasattr(ctx, 'selectStatement') and ctx.selectStatement():\n            selectStatement = self.build_select(ctx.selectStatement())\n            \n        blockStatement = None\n        if hasattr(ctx, 'blockStatement') and ctx.blockStatement():\n            blockStatement = self.build_block(ctx.blockStatement())\n        elif hasattr(ctx, 'statement') and ctx.statement():\n            # If it's a single statement instead of a block\n            blockStatement = self.build_statement(ctx.statement())\n\n        return IfStatementNode(\n            keywordIf=\"IF\",\n            selectStatement=selectStatement,\n            blockStatement=blockStatement,\n            keywordNot=keywordNot,\n            keywordEXISTS=keywordEXISTS\n        )\n\n    def build_block(self, ctx):\n        \"\"\"Build block statement\"\"\"\n        from Ast.statement_nodes import BlockStatementNode\n        statements = []\n        if hasattr(ctx, 'statement'):\n            for stmt_ctx in ctx.statement():\n                stmt = self.build_statement(stmt_ctx)\n                if stmt:\n                    statements.append(stmt)\n                    \n        return BlockStatementNode(\n            keywordBegin=\"BEGIN\",\n            statementList=statements,\n            keywordEnd=\"END\"\n        )\n\n    def build_try_catch(self, ctx):\n        \"\"\"Build TRY-CATCH statement\"\"\"\n        from Ast.statement_nodes import tryCatchStatementNode\n        \n        try_statements = []\n        if hasattr(ctx, 'statement'):\n            # Simple approach: collect all statements\n            for stmt_ctx in ctx.statement():\n                stmt = self.build_statement(stmt_ctx)\n                if stmt:\n                    try_statements.append(stmt)\n\n        return tryCatchStatementNode(\n            keywordBeginForTry=\"BEGIN\",\n            keywordBeginTry=\"TRY\",\n            tryStatementList=try_statements,\n            keywordEndForTry=\"END\",\n            keywordEndTry=\"TRY\",\n            keywordBeginForCatch=\"BEGIN\",\n            keywordBeginCatch=\"CATCH\",\n            catchStatementList=[],\n            keywordEndForCatch=\"END\",\n            keywordEndCatch=\"CATCH\"\n        )\n\n    def build_declare(self, ctx):\n        \"\"\"Build DECLARE statement\"\"\"\n        from Ast.statement_nodes import declareStatementNode\n        return declareStatementNode(\n            keywordDeclare=\"DECLARE\",\n            variableName=ctx.VARIABLE().getText(),\n            dataType=ctx.dataType().getText(),\n            operator=None,\n            expression=None\n        )\n\n    def build_set(self, ctx):\n        \"\"\"Build SET statement\"\"\"\n        from Ast.statement_nodes import setStatementNode\n        variableName = ctx.VARIABLE().getText() if ctx.VARIABLE() else ctx.columnName().getText()\n        expression = self.expr_builder.build_expression(ctx.expression()) if hasattr(ctx, 'expression') and ctx.expression() else None\n        \n        return setStatementNode(\n            keywordSet=\"SET\",\n            variableName=variableName,\n            operator=\"=\",\n            expression=expression\n        )\n\n    def build_exec(self, ctx):\n        from Ast.statement_nodes import execStatementNode\n        identifier = ctx.getChild(1).getText()\n        return execStatementNode(\n            keywordExec=\"EXEC\",\n            identifier=identifier,\n            expressionList=None\n        )\n"
        }
    ]
}