{
    "sourceFile": "builders/ast_builder.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1768865994339,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1768866004903,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,8 +34,9 @@\n         stmt = self.statement_builder.build_statement(ctx)\n         if stmt is None:\n             # Fallback to generic node if not handled\n             from dataclasses import dataclass\n+\n             @dataclass\n             class UnknownStatementNode:\n                 type: str\n                 text: str\n"
                },
                {
                    "date": 1768913153598,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,83 @@\n+from SQLParserVisitor import SQLParserVisitor as MyParserVisitor\r\n+from SQLParser import SQLParser as MyParser\r\n+from builders.statement_builder import StatementBuilder\r\n+\r\n+\r\n+class AstBuilder(MyParserVisitor):\r\n+\r\n+    def __init__(self):\r\n+        self.statement_builder = StatementBuilder()\r\n+\r\n+    def visitSqlScript(self, ctx: MyParser.SqlScriptContext):\r\n+        print('Building AST...')\r\n+        statements = []\r\n+        for batch in ctx.batch():\r\n+            batch_statements = self.visit(batch)\r\n+            if batch_statements:\r\n+                if isinstance(batch_statements, list):\r\n+                    statements.extend(batch_statements)\r\n+                else:\r\n+                    statements.append(batch_statements)\r\n+        return statements\r\n+\r\n+    def visitBatch(self, ctx: MyParser.BatchContext):\r\n+        statements = []\r\n+        for i in range(ctx.getChildCount()):\r\n+            child = ctx.getChild(i)\r\n+            if isinstance(child, MyParser.StatementContext):\r\n+                stmt = self.visit(child)\r\n+                if stmt is not None:\r\n+                    statements.append(stmt)\r\n+        return statements\r\n+\r\n+    def visitStatement(self, ctx: MyParser.StatementContext):\r\n+        stmt = self.statement_builder.build_statement(ctx)\r\n+        if stmt is None:\r\n+            from dataclasses import dataclass\r\n+\r\n+            @dataclass\r\n+            class UnknownStatementNode:\r\n+                type: str\r\n+                text: str\r\n+            return UnknownStatementNode(type=\"UnknownStatement\", text=ctx.getText()[:50] + \"...\")\r\n+        return stmt\r\n+\r\n+    # Delegate all other visits to statement builder\r\n+    def visitGoStatement(self, ctx):\r\n+        return self.statement_builder.build_go(ctx)\r\n+\r\n+    def visitCreateTableStatement(self, ctx):\r\n+        return self.statement_builder.build_create_table(ctx)\r\n+\r\n+    def visitAlterTableStatement(self, ctx):\r\n+        return self.statement_builder.build_alter_table(ctx)\r\n+\r\n+    def visitUpdateStatement(self, ctx):\r\n+        return self.statement_builder.build_update(ctx)\r\n+\r\n+    def visitDeleteStatement(self, ctx):\r\n+        return self.statement_builder.build_delete(ctx)\r\n+\r\n+    def visitSelectStatement(self, ctx):\r\n+        return self.statement_builder.build_select(ctx)\r\n+\r\n+    def visitInsertStatement(self, ctx):\r\n+        return self.statement_builder.build_insert(ctx)\r\n+\r\n+    def visitIfStatement(self, ctx):\r\n+        return self.statement_builder.build_if(ctx)\r\n+\r\n+    def visitBlockStatement(self, ctx):\r\n+        return self.statement_builder.build_block(ctx)\r\n+\r\n+    def visitTryCatchStatement(self, ctx):\r\n+        return self.statement_builder.build_try_catch(ctx)\r\n+\r\n+    def visitDeclareStatement(self, ctx):\r\n+        return self.statement_builder.build_declare(ctx)\r\n+\r\n+    def visitSetStatement(self, ctx):\r\n+        return self.statement_builder.build_set(ctx)\r\n+\r\n+    def visitExecStatement(self, ctx):\r\n+        return self.statement_builder.build_exec(ctx)\r\n"
                }
            ],
            "date": 1768865994339,
            "name": "Commit-0",
            "content": "from SQLParserVisitor import SQLParserVisitor as MyParserVisitor\nfrom SQLParser import SQLParser as MyParser\nfrom builders.statement_builder import StatementBuilder\n\n\nclass AstBuilder(MyParserVisitor):\n\n    def __init__(self):\n        self.statement_builder = StatementBuilder()\n\n    def visitSqlScript(self, ctx: MyParser.SqlScriptContext):\n        print('Building AST...')\n        statements = []\n        for batch in ctx.batch():\n            batch_statements = self.visit(batch)\n            if batch_statements:\n                if isinstance(batch_statements, list):\n                    statements.extend(batch_statements)\n                else:\n                    statements.append(batch_statements)\n        return statements\n\n    def visitBatch(self, ctx: MyParser.BatchContext):\n        statements = []\n        for i in range(ctx.getChildCount()):\n            child = ctx.getChild(i)\n            if isinstance(child, MyParser.StatementContext):\n                stmt = self.visit(child)\n                if stmt is not None:\n                    statements.append(stmt)\n        return statements\n\n    def visitStatement(self, ctx: MyParser.StatementContext):\n        stmt = self.statement_builder.build_statement(ctx)\n        if stmt is None:\n            # Fallback to generic node if not handled\n            from dataclasses import dataclass\n            @dataclass\n            class UnknownStatementNode:\n                type: str\n                text: str\n            return UnknownStatementNode(type=\"UnknownStatement\", text=ctx.getText()[:50] + \"...\")\n        return stmt\n\n    # Delegate all other visits to statement builder\n    def visitGoStatement(self, ctx):\n        return self.statement_builder.build_go(ctx)\n\n    def visitCreateTableStatement(self, ctx):\n        return self.statement_builder.build_create_table(ctx)\n\n    def visitAlterTableStatement(self, ctx):\n        return self.statement_builder.build_alter_table(ctx)\n\n    def visitUpdateStatement(self, ctx):\n        return self.statement_builder.build_update(ctx)\n\n    def visitDeleteStatement(self, ctx):\n        return self.statement_builder.build_delete(ctx)\n\n    def visitSelectStatement(self, ctx):\n        return self.statement_builder.build_select(ctx)\n\n    def visitInsertStatement(self, ctx):\n        return self.statement_builder.build_insert(ctx)\n\n    def visitIfStatement(self, ctx):\n        return self.statement_builder.build_if(ctx)\n\n    def visitBlockStatement(self, ctx):\n        return self.statement_builder.build_block(ctx)\n\n    def visitTryCatchStatement(self, ctx):\n        return self.statement_builder.build_try_catch(ctx)\n\n    def visitDeclareStatement(self, ctx):\n        return self.statement_builder.build_declare(ctx)\n\n    def visitSetStatement(self, ctx):\n        return self.statement_builder.build_set(ctx)\n\n    def visitExecStatement(self, ctx):\n        return self.statement_builder.build_exec(ctx)\n"
        }
    ]
}