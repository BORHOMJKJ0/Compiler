{
    "sourceFile": "NULL_VALUES_VISUAL.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1769013310042,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1769013310042,
            "name": "Commit-0",
            "content": "# NULL VALUES - Visual Summary\n\n## Overview\n```\nTotal Parsed Statements:    41\nStatements With Nulls:      30 (73.2%)\nTotal Null Count:           237\nUnique Null Paths:          53\n```\n\n## Critical Nulls (Needs Fixing) ❌\n\n### 1. FROM Clause - Schema, Keyword, Alias Missing\n```\nfromClause.tableSource[0].keyword: 17 nulls\nfromClause.tableSource[0].identifier: 17 nulls  \nfromClause.tableSource[0].tableName.schema: 16 nulls\n```\n\n**Examples of what should be captured:**\n```\nFROM products              ← keyword: \"FROM\", identifier: null, schema: null\nFROM dbo.TRACKING          ← keyword: \"FROM\", identifier: null, schema: \"dbo\"\nFROM sys.columns AS c      ← keyword: \"FROM\", identifier: \"c\", schema: \"sys\"\n```\n\n**Current Result (Wrong):**\n```json\n{\n  \"fromClause\": {\n    \"tableSource\": [\n      {\n        \"tableName\": {\"name\": \"products\", \"schema\": null},  ← Wrong: null\n        \"keyword\": null,                                     ← Wrong: null (should be \"FROM\")\n        \"identifier\": null                                   ← Wrong: null (no alias, but structure wrong)\n      }\n    ]\n  }\n}\n```\n\n---\n\n### 2. UPDATE Statement - Expression Missing\n```\nassignmentList[0].expression: 1 null\noperator: 4 nulls (in conditions)\nexpression: 4 nulls (general)\n```\n\n**Example:**\n```sql\nUPDATE FACT1\nSET [KEY1'S] = CASE WHEN KEY2 = 4 OR KEY3 IN (1,7) THEN 1 ELSE 0 END\nWHERE [KEY1'S] IS NULL\n```\n\n**Current Result (Wrong):**\n```json\n{\n  \"assignmentList\": [\n    {\n      \"column\": \"[KEY1'S]\",\n      \"expression\": null  ← Wrong: Should contain CASE expression\n    }\n  ],\n  \"whereClause\": {\n    \"condition\": {\n      \"operator\": null  ← Wrong: Should be \"IS\"\n    }\n  }\n}\n```\n\n---\n\n### 3. INSERT Statement - Columns and Values Missing\n```\ninsertColumns: 1 null\ninsertValues: 1 null\nselectStatement: 1 null\n```\n\n**Example:**\n```sql\nINSERT INTO TRACKING ([TRACKING_KEY], [C_KEY], [USER_KEY], ...)\nVALUES (-1, -1, -1, ...)\n```\n\n**Current Result (Wrong):**\n```json\n{\n  \"tableName\": {\"name\": \"TRACKING\", \"schema\": null},\n  \"insertColumns\": null,     ← Wrong: Should be [\"TRACKING_KEY\", \"C_KEY\", \"USER_KEY\", ...]\n  \"insertValues\": null,      ← Wrong: Should be [-1, -1, -1, ...]\n  \"selectStatement\": null\n}\n```\n\n---\n\n## Expected/Normal Nulls (Not Issues) ✓\n\n### 1. Optional Clauses (15 + 10 = 25 nulls)\n```\norderByClause: 15 nulls     ← EXPECTED: Not all SELECT have ORDER BY\nwhereClause: 10 nulls       ← EXPECTED: Not all SELECT have WHERE\n```\n\n**Example:**\n```sql\nSELECT productid, productname FROM products\n-- No WHERE clause → whereClause: null ✓ CORRECT\n-- No ORDER BY → orderByClause: null ✓ CORRECT\n```\n\n### 2. Column Aliases (41 nulls)\n```\nselectList[0].keywordAs: 16 nulls     ← EXPECTED: No AS keyword = no alias\nselectList[0].identifier: 16 nulls    ← EXPECTED: No alias = null\n```\n\n**Example:**\n```sql\nSELECT productid, productname FROM products\n-- No aliases → keywordAs: null, identifier: null ✓ CORRECT\n```\n\n### 3. Qualified Column Names (25+ nulls)\n```\nselectList[0].expression.table_name: 9 nulls      ← EXPECTED\nselectList[1].expression.table_name: 9 nulls      ← EXPECTED\nwhereClause.condition.table_name: 8 nulls         ← EXPECTED\n```\n\n**Example:**\n```json\n{\n  \"selectList\": [\n    {\n      \"expression\": {\n        \"column_name\": \"productid\",\n        \"table_name\": null  ← EXPECTED: \"productid\" not qualified\n      }\n    }\n  ]\n}\n```\n\n---\n\n## File-by-File Breakdown\n\n### train.sql (25 statements, 173 nulls)\n```\nProblematic:\n├─ fromClause missing data: 48 nulls (16+16+16)\n├─ selectList keyword/identifier: 30 nulls (15+15)\n└─ Column table_name (expected): 22 nulls\n\nNormal (Expected):\n├─ orderByClause: 14 nulls ✓\n└─ whereClause: 8 nulls ✓\n```\n\n### train2.sql (2 statements, 13 nulls)\n```\nProblematic:\n├─ FROM clause data: 7 nulls (1+1+1+1+1+1+1)\n├─ INSERT columns/values: 3 nulls (1+1+1)\n└─ blockStatement: 1 null\n\nNormal (Expected):\n├─ orderByClause: 1 null ✓\n└─ column aliases: 1 null ✓\n```\n\n### testing.sql (14 statements, 51 nulls)\n```\nProblematic:\n├─ operator: 4 nulls ❌\n├─ expression: 4 nulls ❌\n├─ UPDATE assignment: 1 null ❌\n├─ FROM clause data: 6 nulls ❌\n├─ selectStatement nested: 7 nulls\n└─ Constraint keyword2: 3 nulls\n\nNormal (Expected):\n├─ orderByClause: 5 nulls ✓\n└─ whereClause: 5 nulls ✓\n```\n\n### full_sql_test.sql\n```\nError: No AST generated (File contains only comments)\n```\n\n---\n\n## Null Pattern Analysis\n\n### Pattern 1: Optional Clauses (NOT A PROBLEM)\n```\nPattern: Where/OrderBy/FromClause = null\nFrequency: 25 nulls\nRoot Cause: Clause not present in SQL\nFix: NONE - This is correct behavior\n```\n\n### Pattern 2: Table Aliases (NOT A PROBLEM)\n```\nPattern: keywordAs/identifier = null\nFrequency: 32 nulls\nRoot Cause: No alias used in SQL\nFix: NONE - This is correct behavior\n```\n\n### Pattern 3: Non-Qualified Columns (NOT A PROBLEM)\n```\nPattern: expression.table_name = null\nFrequency: 25+ nulls\nRoot Cause: Column not qualified (no table prefix)\nFix: NONE - This is correct behavior\n```\n\n### Pattern 4: FROM Clause Incomplete (PROBLEM!)\n```\nPattern: fromClause.tableSource[0].{keyword,identifier,schema} = null\nFrequency: 50 nulls\nRoot Cause: Builder not extracting this data\nFix: REQUIRED - Modify build_from_clause\n```\n\n### Pattern 5: UPDATE Expressions (PROBLEM!)\n```\nPattern: assignmentList[0].expression = null\nPattern: operator = null (in expressions)\nFrequency: 8 nulls\nRoot Cause: Builder not building expressions\nFix: REQUIRED - Modify build_update_statement\n```\n\n### Pattern 6: INSERT Clauses (PROBLEM!)\n```\nPattern: insertColumns/insertValues = null\nFrequency: 3 nulls\nRoot Cause: Builder not parsing INSERT structure\nFix: REQUIRED - Modify build_insert_statement\n```\n\n---\n\n## Action Items\n\n### Priority 1: FIX CRITICAL NULLS\n- [ ] Fix UPDATE expressions and operators\n- [ ] Fix INSERT columns and values parsing\n- [ ] Test with training files\n\n### Priority 2: FIX HIGH NULLS\n- [ ] Fix FROM clause keyword/schema/alias\n- [ ] Handle qualified table names\n- [ ] Test comprehensive scenarios\n\n### Priority 3: VERIFY EXPECTED NULLS\n- [ ] Confirm optional clauses are truly optional\n- [ ] Verify alias handling is correct\n- [ ] Document null patterns in code\n\n---\n\n## Test Command\n```bash\ncd c:\\Users\\LEGION\\Desktop\\Compiler\npython test_all_sql_files.py\n```\n\nThis generates complete null analysis for all SQL test files.\n"
        }
    ]
}